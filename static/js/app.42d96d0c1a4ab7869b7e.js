webpackJsonp([1],[,,,function(e,t,n){"use strict";var o=n(63),i=n.n(o),a=n(24),s=n.n(a),c=function(e,t,n,o){return new s.a(function(a,s){var c=new XMLHttpRequest;c.onreadystatechange=function(){4===c.readyState&&(c.status>=200&&c.status<300||304===c.status?(o(c.responseText),a(c.responseText)):(alert("ajax通信失败 "+c.status),s("ajax通信失败 "+c.status)))},c.onerror=function(){console.log("error"),s("error")},c.open(n,t,!0),"post"===n?(c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(i()(e))):"get"===n&&c.send()})};t.a=c},,,,,,function(e,t,n){n(108);var o=n(0)(n(56),n(128),null,null);e.exports=o.exports},,,,,,,,,,,,,,function(e,t,n){n(109);var o=n(0)(n(54),n(129),"data-v-a57a4198",null);e.exports=o.exports},,,,,,,,,,,,,,function(e,t,n){n(101);var o=n(0)(n(50),n(121),"data-v-0d062118",null);e.exports=o.exports},function(e,t,n){n(102);var o=n(0)(n(55),n(122),"data-v-2b41c4c4",null);e.exports=o.exports},function(e,t,n){n(110);var o=n(0)(n(57),n(130),"data-v-b3148672",null);e.exports=o.exports},function(e,t,n){n(99);var o=n(0)(n(58),n(119),"data-v-0ba10a1b",null);e.exports=o.exports},function(e,t,n){n(111);var o=n(0)(n(60),n(131),"data-v-e8e24f66",null);e.exports=o.exports},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o={};o.install=function(e){e.prototype.myconfig={baseurl:"https://api.xiaoboma.cn:3000",userid:"",username:""}}},function(e,t,n){"use strict";var o=n(15),i=n(132),a=n(134),s=n(112),c=n.n(s),r=n(115),l=n.n(r),d=n(114),m=n.n(d),p=n(37),u=n.n(p),v=n(116),h=n.n(v),f=n(40),g=n.n(f),_=n(23),y=n.n(_),I=n(39),C=n.n(I),k=n(41),b=n.n(k),w=n(38),x=n.n(w),S=n(113),T=n.n(S),F=n(117),L=n.n(F);o.default.use(i.a),o.default.use(a.a),t.a=new i.a({routes:[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:c.a},{path:"/login",name:"login",component:u.a},{path:"/signup",name:"signUp",component:h.a},{path:"/post",name:"post",component:l.a},{path:"/personal",name:"personal",component:m.a},{path:"/shop",name:"shop",component:g.a},{path:"/activity",name:"activity",component:y.a},{path:"/map",name:"map",component:C.a},{path:"/uploadimg",name:"uploadimg",component:b.a},{path:"/citypicker",name:"citypicker",component:x.a},{path:"/openshop",name:"openshop",component:T.a},{path:"/uploadimg_iview",name:"uploadimg_iview",component:L.a}]})},function(e,t){},,,function(e,t,n){n(107);var o=n(0)(n(48),n(126),null,null);e.exports=o.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(38),i=n.n(o),a=n(9),s=n.n(a),c=n(3);t.default={name:"home",components:{"footer-Component":s.a,"city-Picker":i.a},computed:{currentCity:function(){return this.$route.params.currentCity}},created:function(){var e=this;n.i(c.a)({usernameToken:window.localStorage.discountToken},this.myconfig.baseurl+"/home","post",function(t){var n=JSON.parse(t);e.activities=n.activityinfo,n.userinfo&&(e.userinfo=n.userinfo),console.log(e.userinfo,e.activities),e.loading=!1}).then(function(){console.log(123)})},methods:{cityPicker:function(){this.$router.push({name:"citypicker",query:{currentCity:this.userinfo.location||this.currentCity}})},toShopPage:function(e){this.$router.push({name:"shop",query:{id:e}})},toActivityPage:function(e){this.userinfo._id,this.userinfo.username;this.$router.push({name:"activity",query:{id:e}})},changeShopInfo:function(e,t){if(0===localStorage.discountToken.length)return void alert("您还没有登录");clearTimeout(this.timer),this.timer=null,this.activities[t].isFansTmp=!this.activities[t].isFansTmp;var o={isFansChange:!1,isFans:this.activities[t].isFansTmp,shopId:this.activities[t].shopid,userId:this.userinfo._id},i=this.myconfig.baseurl+"/setShopInfo",a=function(e){var t=JSON.parse(e);console.log(t)},s=this;this.timer=setTimeout(function(){s.activities[t].isFans!==s.activities[t].isFansTmp&&(o.isFansChange=!0,s.activities[t].isFans=s.activities[t].isFansTmp),o.isFansChange&&n.i(c.a)(o,i,"post",a)},2e3)},setStaticsInfo:function(e,t,o){if(0===localStorage.discountToken.length)return void alert("您还没有登录");clearTimeout(this.timer),this.timer=null,"likes"===t?(this.activities[e].isLikeTmp=!this.activities[e].isLikeTmp,this.activities[e].isLikeTmp?this.activities[e].statics.likes++:this.activities[e].statics.likes--):"collections"===t&&(this.activities[e].isCollectedTmp=!this.activities[e].isCollectedTmp,this.activities[e].isCollectedTmp?this.activities[e].statics.collections++:this.activities[e].statics.collections--);var i={isLikesChange:!1,isCollectionsChange:!1,isCommentsChange:!1,isLike:!1,isCollected:!1,activityId:this.activities[e]._id,userId:this.userinfo._id},a=this.myconfig.baseurl+"/setActivityInfo",s=function(e){var t=JSON.parse(e);console.log(t)},r=this;this.timer=setTimeout(function(){r.activities[e].isLike!==r.activities[e].isLikeTmp&&(i.isLikesChange=!0,r.activities[e].isLike=r.activities[e].isLikeTmp,i.isLike=r.activities[e].isLike),r.activities[e].isCollected!==r.activities[e].isCollectedTmp&&(i.isCollectionsChange=!0,r.activities[e].isCollected=r.activities[e].isCollectedTmp,i.isCollected=r.activities[e].isCollected),(i.isLikesChange||i.isCollectionsChange)&&n.i(c.a)(i,a,"post",s)},2e3)}},data:function(){return{timer:null,loading:!0,pickcity:!1,activities:[],userinfo:{},isLikeTmp:!1,isCollectedTmp:!1}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default={name:"login",computed:{},data:function(){return{formInline:{user:"",password:""},ruleInline:{user:[{required:!0,message:"请填写用户名",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"},{type:"string",min:6,message:"密码长度不能小于6位",trigger:"blur"}]},login:!0}},methods:{toSignUp:function(){window.location.hash="/signup"},handleLogIn:function(e){var t=this,i=this.formInline.user,a=this.formInline.password;this.$refs[e].validate(function(e){if(e){var s={username:i,password:a},c=t.myconfig.baseurl+"/login",r=function(e){var n=JSON.parse(e);"success"===n.login?(console.log("登录成功"),window.localStorage.discountToken=n.token,sessionStorage.discount_userid=n.userid,sessionStorage.discount_username=n.username,t.$router.push({path:"/home"})):"fail"===n.login?console.log("用户不存在，请先注册"):console.log("something wrong")};n.i(o.a)(s,c,"post",r)}else console.log("输入有误")})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default={name:"login",computed:{},data:function(){return{formInline:{user:"",location:""},ruleInline:{user:[{required:!0,message:"请填写用户名",trigger:"blur"}],location:[{required:!0,message:"请填写地址",trigger:"blur"}]},single:!1}},methods:{handleSignIn:function(e){var t=this,i=this.formInline.user,a=this.formInline.location;this.$refs[e].validate(function(e){if(e){var s=t.myconfig.baseurl+"/openshop",c={userid:t.$route.query.userid,shopname:i,location:a};console.log(c);var r=function(e){var n=JSON.parse(e);"success"===n.openshop?(console.log("申请成功"),t.$router.push({path:"/personal"})):"fail"===n.openshop?console.log("申请失败"):console.log("someting wrong")};n.i(o.a)(c,s,"post",r)}})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),i=n.n(o),a=n(40),s=n.n(a),c=n(37),r=n.n(c),l=n(9),d=n.n(l),m=n(3);t.default={name:"footer",components:{"activity-Component":i.a,"shop-Component":s.a,"login-Component":r.a,"footer-Component":d.a,Follows:{template:'<div class="follows_container">\n          <div :style="container1">\n          <img :src="shopInfo.headImg.indexOf(\'http\')===-1?baseurl+shopInfo.headImg:shopInfo.headImg" :style="headimgStyle">\n          <span :style="shopnameStyle">{{shopInfo.shopName}}</span>\n          </div>\n          <Button shape="circle" v-on:click.stop="remove">取消关注</Button>\n          </div>',props:["shopInfo","baseurl"],methods:{remove:function(){this.$emit("remove")}},data:function(){return{container1:{display:"flex",alignItems:"center"},headimgStyle:{width:"4rem",height:"4rem"},shopnameStyle:{fontSize:"1rem",marginLeft:"1rem"}}}},Collects:{template:'<div class="collects_container">\n          <img :src="baseurl+activityInfo.activityContent[2].coverimg" style="width:8rem;height:8rem;">\n          <div style="width:10rem;height:8rem;overflow:auto">\n          <h3 style="color:#5cadff" @click.stop="toShop">{{activityInfo.shopName}}</h3>\n          <h4>{{activityInfo.activityContent[0].title}}</h4>\n          <p>{{activityInfo.activityContent[1].content}}</p>\n          </div>\n            <Button icon="close" shape="circle" size="small" v-on:click.stop="remove"></Button>\n          </div>',props:["activityInfo","baseurl"],methods:{toShop:function(){this.$emit("toShop")},remove:function(){this.$emit("remove")}}}},computed:{toLogin:function(){return!(window.localStorage.discountToken.length>0)&&(this.$router.push({path:"/login"}),!1)}},created:function(){var e=this,t={userNameToken:localStorage.discountToken},o=this.myconfig.baseurl+"/personal",i=function(t){var n=JSON.parse(t);e.personal=n,e.personalinfo=n.userInfo.personalinfo,e.personalinfo.headimg=-1===e.personalinfo.headimg.indexOf("http")?e.myconfig.baseurl+e.personalinfo.headimg:e.personalinfo.headimg,e.personalinfo.coverimg=-1===e.personalinfo.coverimg.indexOf("http")?e.myconfig.baseurl+e.personalinfo.coverimg:e.personalinfo.coverimg,console.log("that.personal",e.personal),e.loading=!1};n.i(m.a)(t,o,"post",i)},methods:{openshop:function(){this.$router.push({name:"openshop",query:{userid:this.personal.userInfo._id}})},filechanged:function(e){var t=this;console.log(e.target.id),console.log(e.target.files);var n=e.target.files[0],o=new FileReader;if(/image/.test(n.type)){o.readAsDataURL(n),o.onerror=function(){console.log("读取失败，错误码为:"+o.error.code)},o.onload=function(n){t.personalinfo[e.target.id]=o.result};var i,a;i=new FormData,i.append("file",n),i.append("token",localStorage.discountToken),i.append("img",e.target.id),i.append("shopid",t.personal.userInfo.myshop.shopid),a=new XMLHttpRequest,a.upload.onprogress=function(n){if(n.lengthComputable){var o=Math.round(100*n.loaded/n.total);t.uploadimg[e.target.id].progress=o}},a.open("post",t.myconfig.baseurl+"/uploadimg",!0),t.uploadimg[e.target.id].loading=!0,a.onreadystatechange=function(){if(4==a.readyState){console.log(a.responseText);var n=JSON.parse(a.responseText);console.log(n),"success"==n.result?e.target.id.indexOf("user")>-1?t.personalinfo[e.target.id.substring(e.target.id.indexOf("_")+1,e.target.id.length)]=t.myconfig.baseurl+n.url:t.personal.userInfo.myshopInfo[e.target.id.substring(e.target.id.indexOf("_")+1,e.target.id.length)]=t.myconfig.baseurl+n.url:alert("上传失败"),t.uploadimg[e.target.id].loading=!1}},a.send(i)}else reject("err"),alert("请选择图片文件！")},uploadimg:function(){var e=this,t=this.files.map(function(e){return e.fileinfo});console.log(t),t.forEach(function(t,n){var o,i;o=new FormData,o.append("file",t),i=new XMLHttpRequest,i.upload.onprogress=function(t){if(t.lengthComputable){var o=Math.round(100*t.loaded/t.total);e.files[n].progress=o}},i.open("post",e.myconfig.baseurl+"/uploadimg",!0),i.onreadystatechange=function(){4==i.readyState&&console.log(i.responseText)},i.send(o)})},removeShop:function(e){var t={isFansChange:!0,isFans:!1,shopId:this.personal.shopsInfo[e].shopId,userId:this.personal.userInfo._id},o=this.myconfig.baseurl+"/setShopInfo",i=this,a=function(t){var n=JSON.parse(t);i.personal.userInfo.shopid.splice(e,1),i.personal.shopsInfo.splice(e,1),console.log(n)};n.i(m.a)(t,o,"post",a)},removeActivity:function(e){var t=this.personal.activitiesInfo[e],o={isLikesChange:!1,isCollectionsChange:!0,isCommentsChange:!1,isLike:!1,isCollected:!1,activityId:t.activityId,userId:this.personal.userInfo._id},i=this.myconfig.baseurl+"/setActivityInfo",a=this,s=function(t){var n=JSON.parse(t);"success"===n.setactivityInfo&&(a.personal.userInfo.activityid.splice(e,1),a.personal.activitiesInfo.splice(e,1)),console.log(n)};n.i(m.a)(o,i,"post",s)},toShopPage:function(e){this.$router.push({name:"shop",query:{id:e}})},toActivityPage:function(e){this.$router.push({name:"activity",query:{id:e}})},logOut:function(){window.localStorage.discountToken="",sessionStorage.discount_userid="",sessionStorage.discount_username="",this.$router.push({path:"/login"})}},data:function(){return{uploadimg:{user_headimg:{progress:0,loading:!1},user_coverimg:{progress:0,loading:!1},shop_headimg:{progress:0,loading:!1},shop_coverimg:{progress:0,loading:!1}},personalinfo:{coverimg:"",headimg:"",sex:"",birthday:""},timer:null,loading:!0,personal:{},sellected:"2",setShow:!1}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),i=n.n(o),a=n(3),s=n(9),c=n.n(s),r=n(41),l=n.n(r);t.default={name:"post",components:{"footer-Component":c.a,addtitle:{template:'<div class="contentContainer"><label class="note">标题</label>\n          <div :style="contentContainer_inner">\n          <Input :value="text.title||\'\'" v-on:input="changeinput" class="add_input" placeholder="请输入活动标题" ></Input>\n          <Button type="text" icon="close-circled" @click="remove"></Button>\n          </div>\n          </div>',data:function(){return{contentContainer_inner:{width:"100%",display:"flex",flexDirection:"row"},empty_note:{display:"none",color:"orange"}}},props:["index","text"],methods:{changeinput:function(e){this.$emit("getinputvalue",{index:this.index,value:e})},remove:function(){this.$emit("removeComponent",this.index)}}},addtext:{template:'<div class="contentContainer"><label class="note">文本域</label>\n          <div  :style="contentContainer_inner">\n          <Input :value="text.content||\'\'" v-on:input="changeinput" class="add_input" type="textarea" placeholder="请输入活动内容"></Input>\n          <Button type="text" icon="close-circled" @click="remove"></Button>\n          </div>\n          </div>',props:["index","text"],data:function(){return{contentContainer_inner:{width:"100%",display:"flex",flexDirection:"row"}}},methods:{changeinput:function(e){this.$emit("getinputvalue",{index:this.index,value:e})},remove:function(){this.$emit("removeComponent",this.index)}}},addimg:l.a,addcoverimg:{template:"<div class=\"contentContainer\">\n              <input id='uploadimg_cover' type='file' style='display:none'\n                     accept='image/gif,image/jpeg,image/jpg,image/png'\n                     @change='filechanged'>\n                <label for='uploadimg_cover' style=\"display:block;width:8rem;height:3rem;line-height:3rem;text-align:center;border-radius:3px;border:1px solid #dddee1\">\n                <Icon size=20 type=\"ios-cloud-upload-outline\"></Icon>上传封面</label>\n              <div :style='filelist'>\n                <div class='show-file' v-if=\"Object.keys(file).length>0\">\n                  <div class='show-file-image'><img :src=\"file.value\" width='100px' height='100px'></div>\n                  <div class='show-file-progress'>{{file.progress}}</div>\n                </div>\n              </div>\n            </div>",props:["FL"],created:function(){this.file=1===this.FL.length?this.FL[0]:{}},data:function(){return{file:{},filelist:{paddingTop:"5px"},contentContainer_inner:{width:"100%",display:"flex",alignItems:"center"}}},methods:{filechanged:function(e){var t=this,n=e.target.files[0];console.log(n);var o=new FileReader;/image/.test(n.type)?(o.readAsDataURL(n),o.onerror=function(){console.log("上传失败，错误码为:"+o.error.code)},o.onload=function(e){t.file={fileinfo:n,value:o.result,progress:0},t.$emit("getinputimg",{file:t.file})}):alert("请选择图片文件！")}}}},methods:{checkinput:function(){var e=this;if(this.post_click)return this.postnote="正在发布...请耐心等待",setTimeout(function(){e.postnote="发布中..."},2e3),!0;if(0===this.title.length)return this.postnote="信息不全！不能发布",this.title_note="*请填写标题！",setTimeout(function(){e.postnote="发布页面",e.title_note=""},2e3),!0;if(0===this.summary.length)return this.postnote="信息不全！不能发布",this.summary_note="*请填写摘要！",setTimeout(function(){e.postnote="发布页面",e.summary_note=""},2e3),!0;if(0===this.coverimg.length)return this.postnote="信息不全！不能发布",this.coverimg_note="*请填写摘要！",setTimeout(function(){e.postnote="发布页面",e.coverimg_note=""},2e3),!0;var t=0;return this.inputdata.forEach(function(e,n){e instanceof Array||(e.title||e.content?e.title&&0===e.title.length?t++:e.content&&0===e.content.length&&t++:t++)}),t>0?(this.postnote="信息填写不全！不能发布",setTimeout(function(){e.postnote="发布页面"},2e3),!0):(this.postdata=[{title:this.title},{content:this.summary},{coverimg:this.coverimg}].concat(this.inputdata),this.postnote="发布中...",this.post_click=!0,!1)},removeComponent:function(e){this.mycomponents.splice(e,1),this.inputdata.splice(e,1),console.log(this.inputdata)},back:function(){this.$router.go(-1)},post:function(){var e=this;if(!this.checkinput()){var t=[];this.postdata.forEach(function(n,o){if(n instanceof Array||n.coverimg){var a=new i.a(function(t,i){if(n instanceof Array)var a=n.map(function(e){return e.fileinfo});else var a=[n.coverimg[0].fileinfo];0==a.length&&t(),a.forEach(function(i,s){var c,r;c=new FormData,c.append("file",i),r=new XMLHttpRequest,r.upload.onprogress=function(e){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);a[s].progress=t}},r.open("post",e.myconfig.baseurl+"/postimg",!0),r.onreadystatechange=function(){if(4==r.readyState)if(r.status>=200&&r.status<300||304===r.status){var i=JSON.parse(r.responseText);a[s]=i.url,s==a.length-1&&(n.coverimg?e.postdata[o]={coverimg:a[0]}:e.postdata[o]=a,t())}else alert("ajax通信失败 "+r.status)},r.send(c)})});t.push(a)}}),i.a.all(t).then(function(){console.log(e.postdata);var t={shopid:e.$route.query.shopid,activitycontent:e.postdata},o=e.myconfig.baseurl+"/post",i=function(t){var n=JSON.parse(t);"fail"===n.post?(e.post_click=!1,e.postnote="发布失败，店铺不存在",setTimeout(function(){e.postnote="发布页面"},2e3)):"success"===n.post?(e.postnote="发布成功！",setTimeout(function(){e.postnote="发布页面",e.$router.go(-1)},2e3)):(e.post_click=!1,e.postnote="发布失败，发送异常，请稍后再发！",setTimeout(function(){e.postnote="发布页面"},2e3))};n.i(a.a)(t,o,"post",i)})}},gettitle:function(e){this.inputdata[e.index]={title:e.value}},getcontent:function(e){this.inputdata[e.index]={content:e.value}},getimg:function(e){this.inputdata[e.index]=e.files},getcoverimg:function(e){this.coverimg=[e.file]},addContent:function(e){var t=e.target;switch("button"!==t.type&&(t=t.parentNode),"button"!==t.type&&(t=t.parentNode),t.dataset.index){case"1":this.mycomponents.push("addtitle"),this.inputdata.push({});break;case"2":this.mycomponents.push("addtext"),this.inputdata.push({});break;case"3":this.mycomponents.push("addimg"),this.inputdata.push([])}}},data:function(){return{title:"",summary:"",coverimg:[],mycomponents:[],inputdata:[],postdata:[],post_click:!1,postnote:"发布页面",title_note:"",summary_note:"",coverimg_note:""}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=n(9),a=n.n(i);t.default={name:"activity",components:{"footer-Component":a.a},methods:{changeActivityInfo:function(e,t){if(0===this.userId.length)return void alert("您还没有登录");clearTimeout(this.timer),"likes"===t?(this.isLikeTmp=!this.isLikeTmp,this.isLikeTmp?this.activityInfo.statics.likes++:this.activityInfo.statics.likes--):"collections"===t&&(this.isCollectedTmp=!this.isCollectedTmp,this.isCollectedTmp?this.activityInfo.statics.collections++:this.activityInfo.statics.collections--);var i=this.myconfig.baseurl+"/setActivityInfo",a=function(e){var t=JSON.parse(e);console.log(t)},s=this;this.timer=setTimeout(function(){var e={isLikesChange:!1,isCollectionsChange:!1,isCommentsChange:!1,isLike:!1,isCollected:!1,activityId:s.activityId,userId:s.userId};s.isLike!==s.isLikeTmp&&(e.isLikesChange=!0,s.isLike=s.isLikeTmp,e.isLike=s.isLike),s.isCollected!==s.isCollectedTmp&&(e.isCollectionsChange=!0,s.isCollected=s.isCollectedTmp,e.isCollected=s.isCollected),(e.isLikesChange||e.isCollectionsChange)&&n.i(o.a)(e,i,"post",a)},2e3)},answear:function(e){this.commentTarget=e.speaker,this.commentTarget!==this.userName?this.placeholder=this.userName+"回复"+this.commentTarget+":":(this.commentTarget="",this.placeholder="评论")},enterComment:function(){if(0===this.userId.length)return void alert("您还没有登录");if(this.commentContent){this.showNote=!0;var e={speaker:this.userName,accept:this.commentTarget,content:this.commentContent};this.activityInfo.statics.comments.push(e);var t={isCommentsChange:!0,comment:e,activityId:this.activityId,userId:this.userId},i=this.myconfig.baseurl+"/setActivityInfo",a=function(e){var t=JSON.parse(e);console.log(t)};n.i(o.a)(t,i,"post",a),this.placeholder="评论",this.commentContent="",this.commentTarget=""}else this.showNote=!1},back:function(){this.$router.go(-1)}},created:function(){console.log(window.sessionStorage.discount),this.activityId=this.$route.query.id,this.userId=window.sessionStorage.discount_userid,this.userName=window.sessionStorage.discount_username;var e=this,t={activityId:this.activityId,userId:this.userId};console.log(t);var i=this.myconfig.baseurl+"/activity",a=function(t){var n=JSON.parse(t);e.activityInfo=n.activityInfo,e.isLike=n.isLike,e.isCollected=n.isCollected,e.isLikeTmp=n.isLike,e.isCollectedTmp=n.isCollected,console.log(n),setTimeout(function(){e.loading=!1},1e3)};n.i(o.a)(t,i,"post",a)},data:function(){return{loading:!0,timer:null,activityInfo:{},isLike:!1,isCollected:!1,isLikeTmp:!1,isCollectedTmp:!1,activityId:"",userId:"",userName:"",commentTarget:"",commentContent:"",currentComment:{speaker:"",accept:"",content:""},placeholder:"评论",showNote:!0,staticactive:"staticactive"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default={created:function(){this.currentCity=this.$route.query.currentCity;var e=this;(new AMap.CitySearch).getLocalCity(function(t,n){"complete"===t&&"OK"===n.info&&n&&n.city&&n.bounds&&(e.currentLocation=n.city)})},methods:{back:function(){this.$router.push({name:"home",params:{currentCity:this.currentCity}})},toLetter:function(e){console.log(e.target.innerHTML)},getCity:function(e){var t=this;if(console.log(e.target.dataset),"city"===e.target.dataset.identification){clearTimeout(this.timer),this.timer=null;var i={usernameToken:window.localStorage.discountToken,location:e.target.innerHTML},a=this.myconfig.baseurl+"/setUserInfo",s=function(n){var o=JSON.parse(n);console.log(o),t.currentCity=e.target.innerHTML,t.back()};window.localStorage.discountToken.length>0?this.timer=setTimeout(function(){n.i(o.a)(i,a,"post",s)},2e3):(this.currentCity=e.target.innerHTML,this.back())}}},data:function(){return{timer:null,province_value:"",currentCity:"",currentLocation:"西安",hotCity:["北京","成都","重庆","广州","杭州","南京","上海","深圳","天津","武汉","西安"],province_list:[{name:"北京",city_list:[{name:"北京",code:10}]},{name:"上海",city_list:[{name:"上海",code:21}]},{name:"天津",city_list:[{name:"天津",code:22}]},{name:"重庆",city_list:[{name:"重庆",code:23},{name:"涪陵市",code:230},{name:"万州市",code:231},{name:"黔江市",code:232}]},{name:"河北",city_list:[{name:"石家庄",code:311},{name:"张家口",code:313},{name:"承德",code:314},{name:"秦皇岛",code:335},{name:"唐山",code:315},{name:"廊坊",code:316},{name:"保定",code:312},{name:"沧州",code:317},{name:"衡水",code:318},{name:"邢台",code:319},{name:"邯郸",code:310}]},{name:"山西",city_list:[{name:"太原",code:351},{name:"大同",code:352},{name:"朔州",code:349},{name:"阳泉",code:353},{name:"长治",code:355},{name:"晋城",code:356},{name:"忻州",code:350},{name:"离石",code:358},{name:"晋中",code:354},{name:"临汾",code:357},{name:"运城",code:359},{name:"吕梁市",code:242}]},{name:"内蒙古",city_list:[{name:"呼和浩特",code:471},{name:"包头",code:472},{name:"乌海",code:473},{name:"赤峰",code:476},{name:"海拉尔",code:470},{name:"乌兰浩特",code:482},{name:"通辽",code:475},{name:"锡林浩特",code:479},{name:"集宁",code:474},{name:"东胜",code:477},{name:"临河",code:478},{name:"阿拉善左旗",code:483},{name:"巴彦淖尔市",code:480},{name:"鄂尔多斯市",code:489},{name:"呼伦贝尔市",code:481},{name:"乌兰察布市",code:484},{name:"锡林郭勒盟",code:485},{name:"兴安盟",code:486}]},{name:"辽宁",city_list:[{name:"沈阳",code:24},{name:"朝阳",code:421},{name:"阜新",code:418},{name:"铁岭",code:410},{name:"抚顺",code:413},{name:"本溪",code:414},{name:"辽阳",code:419},{name:"鞍山",code:412},{name:"丹东",code:415},{name:"大连",code:411},{name:"营口",code:417},{name:"盘锦",code:427},{name:"锦州",code:416},{name:"葫芦岛",code:429}]},{name:"吉林",city_list:[{name:"长春",code:431},{name:"白城",code:436},{name:"松原",code:438},{name:"吉林",code:432},{name:"四平",code:434},{name:"辽源",code:437},{name:"通化",code:435},{name:"白山",code:439},{name:"延吉",code:433},{name:"延边州",code:247}]},{name:"黑龙江",city_list:[{name:"哈尔滨",code:451},{name:"齐齐哈尔",code:452},{name:"黑河",code:456},{name:"大庆",code:459},{name:"伊春",code:458},{name:"鹤岗",code:468},{name:"佳木斯",code:454},{name:"双鸭山",code:469},{name:"七台河",code:464},{name:"鸡西",code:467},{name:"牡丹江",code:453},{name:"绥化",code:455},{name:"加格达奇",code:457},{name:"大兴安岭地区",code:285}]},{name:"江苏",city_list:[{name:"南京",code:25},{name:"苏州",code:512},{name:"徐州",code:516},{name:"连云港",code:518},{name:"宿迁",code:527},{name:"淮安",code:517},{name:"盐城",code:515},{name:"扬州",code:514},{name:"泰州",code:523},{name:"南通",code:513},{name:"镇江",code:511},{name:"常州",code:519},{name:"无锡",code:510}]},{name:"浙江",city_list:[{name:"杭州",code:571},{name:"湖州",code:572},{name:"嘉兴",code:573},{name:"舟山",code:580},{name:"宁波",code:574},{name:"绍兴",code:575},{name:"金华",code:579},{name:"台州",code:576},{name:"温州",code:577},{name:"丽水",code:578},{name:"衢州",code:570}]},{name:"安徽",city_list:[{name:"合肥",code:551},{name:"宿州",code:557},{name:"淮北",code:561},{name:"阜阳",code:558},{name:"蚌埠",code:552},{name:"淮南",code:554},{name:"滁州",code:550},{name:"马鞍山",code:555},{name:"芜湖",code:553},{name:"铜陵",code:562},{name:"安庆",code:556},{name:"黄山",code:559},{name:"六安",code:564},{name:"巢湖",code:565},{name:"池州",code:566},{name:"宣城",code:563},{name:"亳州",code:5581}]},{name:"福建",city_list:[{name:"福州",code:591},{name:"南平",code:599},{name:"三明",code:598},{name:"莆田",code:594},{name:"泉州",code:595},{name:"厦门",code:592},{name:"漳州",code:596},{name:"龙岩",code:597},{name:"宁德",code:593},{name:"福安",code:5930},{name:"邵武",code:5990},{name:"石狮",code:5950},{name:"永安",code:5980},{name:"武夷山",code:5991},{name:"福清",code:5995}]},{name:"江西",city_list:[{name:"南昌",code:791},{name:"九江",code:792},{name:"景德镇",code:798},{name:"鹰潭",code:701},{name:"新余",code:790},{name:"萍乡",code:799},{name:"赣州",code:797},{name:"上饶",code:793},{name:"临川",code:794},{name:"宜春",code:795},{name:"吉安",code:796},{name:"抚州",code:7940}]},{name:"山东",city_list:[{name:"济南",code:531},{name:"聊城",code:635},{name:"德州",code:534},{name:"东营",code:546},{name:"淄博",code:533},{name:"潍坊",code:536},{name:"烟台",code:535},{name:"威海",code:631},{name:"青岛",code:532},{name:"日照",code:633},{name:"临沂",code:539},{name:"枣庄",code:632},{name:"济宁",code:537},{name:"泰安",code:538},{name:"莱芜",code:634},{name:"滨州",code:543},{name:"菏泽",code:530}]},{name:"河南",city_list:[{name:"郑州",code:371},{name:"三门峡",code:398},{name:"洛阳",code:379},{name:"焦作",code:391},{name:"新乡",code:373},{name:"鹤壁",code:392},{name:"安阳",code:372},{name:"濮阳",code:393},{name:"开封",code:378},{name:"商丘",code:370},{name:"许昌",code:374},{name:"漯河",code:395},{name:"平顶山",code:375},{name:"南阳",code:377},{name:"信阳",code:376},{name:"济源",code:3910},{name:"周口",code:394},{name:"驻马店",code:396}]},{name:"湖北",city_list:[{name:"武汉",code:27},{name:"十堰",code:719},{name:"襄阳",code:710},{name:"荆门",code:724},{name:"孝感",code:712},{name:"黄冈",code:713},{name:"鄂州",code:711},{name:"黄石",code:714},{name:"咸宁",code:715},{name:"荆州",code:716},{name:"宜昌",code:717},{name:"恩施",code:718},{name:"仙桃",code:728},{name:"潜江",code:7281},{name:"随州市",code:722},{name:"广水",code:7221},{name:"天门",code:7282}]},{name:"湖南",city_list:[{name:"长沙",code:731},{name:"张家界",code:744},{name:"常德",code:736},{name:"益阳",code:737},{name:"岳阳",code:730},{name:"株洲",code:733},{name:"湘潭",code:732},{name:"衡阳",code:734},{name:"郴州",code:735},{name:"永州",code:746},{name:"邵阳",code:739},{name:"怀化",code:745},{name:"娄底",code:738},{name:"吉首",code:743}]},{name:"广东",city_list:[{name:"广州",code:20},{name:"深圳",code:755},{name:"清远",code:763},{name:"韶关",code:751},{name:"河源",code:762},{name:"梅州",code:753},{name:"潮州",code:768},{name:"汕头",code:754},{name:"揭阳",code:663},{name:"汕尾",code:660},{name:"惠州",code:752},{name:"东莞",code:769},{name:"珠海",code:756},{name:"中山",code:760},{name:"江门",code:750},{name:"佛山",code:757},{name:"茂名",code:668},{name:"湛江",code:759},{name:"阳江",code:662},{name:"云浮",code:766},{name:"肇庆",code:758}]},{name:"广西",city_list:[{name:"南宁",code:771},{name:"桂林",code:773},{name:"柳州",code:772},{name:"贺州",code:774},{name:"玉林",code:775},{name:"钦州",code:777},{name:"北海",code:779},{name:"防城港",code:770},{name:"百色",code:776},{name:"河池",code:778},{name:"贵港",code:7750},{name:"梧州",code:7740},{name:"崇左市",code:7711},{name:"来宾市",code:284}]},{name:"海南",city_list:[{name:"海口",code:898},{name:"三亚",code:899},{name:"儋州",code:890},{name:"琼海",code:8901},{name:"文昌",code:8902},{name:"万宁",code:8903},{name:"五指山",code:8904},{name:"东方",code:8905}]},{name:"四川",city_list:[{name:"成都",code:28},{name:"广元",code:839},{name:"绵阳",code:816},{name:"德阳",code:838},{name:"南充",code:817},{name:"广安",code:826},{name:"遂宁",code:825},{name:"内江",code:832},{name:"乐山",code:833},{name:"自贡",code:813},{name:"泸州",code:830},{name:"宜宾",code:831},{name:"攀枝花",code:812},{name:"巴中",code:827},{name:"达州",code:818},{name:"资阳",code:8320},{name:"雅安",code:835},{name:"西昌",code:834},{name:"阿坝州",code:837},{name:"眉山市",code:828},{name:"凉山州",code:281},{name:"甘孜州",code:282}]},{name:"贵州",city_list:[{name:"贵阳",code:851},{name:"六盘水",code:858},{name:"遵义",code:852},{name:"毕节",code:857},{name:"铜仁",code:856},{name:"安顺",code:853},{name:"凯里",code:855},{name:"都匀",code:854},{name:"兴义",code:859},{name:"黔东南州",code:243},{name:"黔南州",code:244},{name:"黔西南州",code:245}]},{name:"云南",city_list:[{name:"昆明",code:871},{name:"曲靖",code:874},{name:"玉溪",code:877},{name:"丽江",code:888},{name:"昭通",code:870},{name:"普洱",code:879},{name:"临沧",code:883},{name:"保山",code:875},{name:"潞西",code:692},{name:"泸水",code:886},{name:"中甸",code:887},{name:"大理",code:872},{name:"楚雄",code:878},{name:"个旧",code:873},{name:"文山",code:876},{name:"景洪",code:691},{name:"红河",code:8730},{name:"德宏州",code:286},{name:"迪庆州",code:287},{name:"西双版纳州",code:288},{name:"怒江州",code:289}]},{name:"西藏",city_list:[{name:"拉萨",code:891},{name:"那曲",code:896},{name:"昌都",code:895},{name:"林芝",code:894},{name:"乃东",code:893},{name:"日喀则",code:892},{name:"噶尔",code:897},{name:"阿里地区",code:8971},{name:"山南地区",code:900},{name:"樟木口岸",code:800}]},{name:"陕西",city_list:[{name:"西安",code:29},{name:"延安",code:911},{name:"铜川",code:919},{name:"渭南",code:913},{name:"咸阳",code:910},{name:"宝鸡",code:917},{name:"汉中",code:916},{name:"榆林",code:912},{name:"商洛",code:914},{name:"安康",code:915}]},{name:"甘肃",city_list:[{name:"兰州",code:931},{name:"嘉峪关",code:937},{name:"白银",code:943},{name:"天水",code:938},{name:"酒泉",code:9370},{name:"张掖",code:936},{name:"金昌",code:935},{name:"庆阳",code:934},{name:"平凉",code:933},{name:"定西",code:932},{name:"陇南",code:939},{name:"临夏",code:930},{name:"甘南藏族",code:941},{name:"武威市",code:9350}]},{name:"宁夏",city_list:[{name:"银川",code:951},{name:"石嘴山",code:952},{name:"吴忠",code:953},{name:"固原",code:954},{name:"中卫市",code:248}]},{name:"青海",city_list:[{name:"西宁",code:971},{name:"平安",code:972},{name:"海晏",code:970},{name:"共和",code:974},{name:"同仁",code:973},{name:"玛沁",code:975},{name:"玉树",code:976},{name:"德令哈",code:977},{name:"果洛藏族自治州",code:236},{name:"海北藏族自治州",code:237},{name:"海东地区",code:238},{name:"海南藏族自治州",code:239},{name:"海西蒙古族藏族自治州",code:240},{name:"黄南藏族自治州",code:241}]},{name:"新疆",city_list:[{name:"乌鲁木齐",code:991},{name:"克拉玛依",code:990},{name:"石河子",code:993},{name:"喀什",code:998},{name:"阿克苏",code:997},{name:"和田",code:903},{name:"吐鲁番",code:995},{name:"哈密",code:902},{name:"阿图什",code:908},{name:"博乐",code:909},{name:"昌吉",code:994},{name:"库尔勒",code:996},{name:"伊犁",code:999},{name:"奎屯",code:992},{name:"塔城",code:901},{name:"阿勒泰",code:906},{name:"巴音郭楞蒙古自治州",code:904},{name:"博尔塔拉蒙古自治州",code:905},{name:"克孜勒苏柯尔克孜自治州",code:907},{name:"伊犁哈萨克自治州",code:989}]}]}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"footer",computed:{active:function(){var e;switch(window.location.hash){case"#/home":e="1";break;case"#/post":e="2";break;case"#/personal":e="3"}return e}},data:function(){return{personal:""}},beforeMount:function(){window.localStorage.discountToken?this.personal="/personal":this.personal="/login"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["addressInfo"],computed:{screenheight:function(){return{height:document.body.offsetHeight+"px"}}},data:function(){var e=this;return{showPanel:!0,planSelectedDisabled:!0,transSelectedDisabled:!0,toPlace:[],search:{init:function(t){t.placeSearch.search(e.addressInfo,function(t,n){var o=n.poiList.pois,i=0,a=0;if(e.markers=[],o.length>0){o.forEach(function(t){var n=t.location,o=n.lng,s=n.lat;a+=o,i+=s,e.markers.push({location:[o,s],name:t.name})});var s={lng:a/o.length,lat:i/o.length};e.mapCenter=[s.lng,s.lat]}})}},toThisPlace:{dblclick:function(t){var n=t.target.G.position;e.markers=e.markers.map(function(t){var o=t.location;return n.lng===o[0]&&n.lat===o[1]?(t.icon="https://raw.githubusercontent.com/xhuanhuan/Happy-Shopping/master/src/assets/end.png",e.toPlace=t.location,e.transSelectedDisabled=!1):t.icon="",t})}},transSelected:"",transList:[{value:"1",label:"公交"},{value:"2",label:"驾车"},{value:"3",label:"步行"}],planSelected:"",plansList:[{value:"1",label:"路径最短"},{value:"2",label:"时间最短"},{value:"3",label:"步行最少"},{value:"4",label:"最少花费"}],Driving:{},Walking:{},Transfer:{},Geolocat:{},lng:0,lat:0,loaded:!1,mylocation:[],markers:[],mapCenter:[122.5273285,31.21515044],plans:[],plan:[],searchOption:{city:"西安市",citylimit:!1},plugin:[{pName:"ToolBar",position:"LB"},{pName:"Geolocation",showButton:!1,events:{init:function(t){e.Geolocat=t,e.Geolocation()}}},{pName:"Transfer",events:{init:function(t){e.Transfer=t}}},{pName:"Driving",events:{init:function(t){e.Driving=t}}},{pName:"Walking",events:{init:function(t){e.Walking=t}}}]}},methods:{clickPanel:function(e){for(var t=e.target;"DIV"!==t.tagName;)t=t.parentNode;if("planTitle"===t.className){var n=parseInt(t.getAttribute("index"));"1"===this.transSelected?this.plan=this.plans[n].path.map(function(e){return[e.lng,e.lat]}):this.plan=this.plans[n]}else console.log(1)},onSearchResult:function(e){var t=this,n=0,o=0;if(this.markers=[],e.length>0){e.forEach(function(e){var i=e.lng,a=e.lat;o+=i,n+=a,t.markers.push({location:[i,a],name:e.name})});var i={lng:o/e.length,lat:n/e.length};this.mapCenter=[i.lng,i.lat]}self.lng=0,self.lat=0},changePlan:function(){if("1"===this.transSelected){var e="disdance",t=0;switch(this.planSelected){case"1":e="disdance";break;case"2":e="time";break;case"3":e="walking_distance";break;case"4":e="cost"}var n=this.plans[0][e];this.plans.forEach(function(o,i){o[e]<n&&(t=i)}),this.plan=this.plans[t].path.map(function(e){return[e.lng,e.lat]})}},changeTrans:function(){var e={};switch(this.transSelected){case"1":e=this.Transfer,this.planSelectedDisabled=!1;break;case"2":e=this.Driving,this.planSelectedDisabled=!0;break;case"3":e=this.Walking,this.planSelectedDisabled=!0}this.getPath(e)},Geolocation:function(){var e=this.Geolocat,t=this;e.getCurrentPosition(function(e,n){n&&n.position&&(console.log("geolocation success"),t.lng=n.position.lng,t.lat=n.position.lat,t.mapCenter=[t.lng,t.lat],t.mylocation=t.mapCenter,t.loaded=!0,t.$nextTick())})},getPath:function(e){var t=this;t.planSelected="","1"===t.transSelected&&e.setCity("西安"),e.search(t.mylocation,t.toPlace,function(e,n){if(console.log(e,n),"complete"==e&&"NO_DATA"!=n.info)switch(t.transSelected){case"1":(new Lib.AMap.TransferRender).autoRender({data:n,panel:"panel"}),t.plan=n.plans[0].path.map(function(e){return[e.lng,e.lat]}),t.plans=n.plans;break;case"2":(new Lib.AMap.DrivingRender).autoRender({data:n,panel:"panel"}),t.plans=n.routes.map(function(e){var t=[];return e.steps.forEach(function(e){var n=e.path.map(function(e){return[e.lng,e.lat]});t=t.concat(n)}),t}),t.plan=t.plans[0];break;case"3":(new Lib.AMap.WalkingRender).autoRender({data:n,panel:"panel"}),t.plans=n.routes.map(function(e){var t=[];return e.steps.forEach(function(e){var n=e.path.map(function(e){return[e.lng,e.lat]});t=t.concat(n)}),t}),t.plan=t.plans[0]}else(new Lib.AMap.WalkingRender).autoRender({data:{info:"抱歉，没有合适线路"},panel:"panel"})})},hide:function(){this.$emit("hide")}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=n(23),a=n.n(i),s=n(39),c=n.n(s),r=n(9),l=n.n(r);t.default={name:"shop",components:{"footer-Component":l.a,"activity-Component":a.a,"map-Component":c.a,Collects:{template:'<div class="collects_container" v-on:click="toActivitiyPage">\n          <img :src="baseurl+activityInfo.activitycontent[2].coverimg" style="width:6rem;height:6rem;">\n          <div style="display:flex;flex-direction:column;justify-content:space-between;width:16rem;height:6rem;">\n          <div style="height:5rem;overflow:auto;">\n              <h4>{{activityInfo.activitycontent[0].title}}</h4>\n              <p>{{activityInfo.activitycontent[1].content}}</p>\n          </div>\n          <div style="display:flex;justify-content:flex-end ">\n          <Button type="text" icon="eye" size="small">{{activityInfo.watches}}</Button>\n          <Button type="text" icon="thumbsup" size="small">{{activityInfo.statics.likes.length}}</Button>\n          <Button type="text" icon="android-favorite-outline" size="small">{{activityInfo.statics.collections.length}}</Button>\n          <Button type="text" icon="chatbox-working" size="small">{{activityInfo.statics.comments.length}}</Button>\n          </div>\n          </div>\n          </div>',props:["activityInfo","activities","baseurl"],methods:{toActivitiyPage:function(){this.$emit("toActivitiyPage")}}}},data:function(){return{timer:null,loading:!0,shopInfo:{},userId:"",userName:"",activities:[],isFans:!1,isFansTmp:!1,showMap:!1}},created:function(){console.log(window.sessionStorage.discount);var e=this.$route.query.id;this.userId=sessionStorage.discount_userid,this.userName=sessionStorage.discount_username;var t=this,i={shopId:e,userId:this.userId},a=this.myconfig.baseurl+"/shop",s=function(e){var n=JSON.parse(e);"success"===n.getShopInfo?(n.shopInfo.fans=n.shopInfo.fans[0],t.shopInfo=n.shopInfo,t.activities=n.activities,t.isFans=n.isFans,t.isFansTmp=t.isFans,t.loading=!1):"fail"===n.getShopInfo?console.log(店铺不存在):console.log("something wrong")};n.i(o.a)(i,a,"post",s)},methods:{changeShopInfo:function(e){if(0===this.userId.length)return void alert("您还没有登录");clearTimeout(this.timer),this.timer=null,this.isFansTmp=!this.isFansTmp,this.isFansTmp?this.shopInfo.fans++:this.shopInfo.fans--;var t=this.myconfig.baseurl+"/setShopInfo",i=function(e){var t=JSON.parse(e);console.log(t)},a=this;this.timer=setTimeout(function(){var e={isFansChange:!1,isFans:!1,shopId:a.shopInfo._id,userId:a.userId};a.isFans!==a.isFansTmp&&(e.isFansChange=!0,a.isFans=a.isFansTmp,e.isFans=a.isFans),e.isFansChange&&n.i(o.a)(e,t,"post",i)},2e3)},back:function(){this.$router.go(-1)},removeCollects:function(e){var t=[].slice.call(this.shopInfo.activities);t.splice(e,1),this.shopInfo.activities=t},toActivitiyPage:function(e){this.$router.push({name:"activity",query:{id:e}})},toPostPage:function(){this.$router.push({name:"post",query:{shopid:this.$route.query.id}})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default={name:"login",computed:{},data:function(){return{formInline:{user:"",password1:"",password2:"",location:""},ruleInline:{user:[{required:!0,message:"请填写用户名",trigger:"blur"}],password1:[{required:!0,message:"请填写密码",trigger:"blur"},{type:"string",min:6,message:"密码长度不能小于6位",trigger:"blur"}],password2:[{required:!0,message:"请填写密码",trigger:"blur"},{type:"string",min:6,message:"密码长度不能小于6位",trigger:"blur"}],location:[{required:!0,message:"请填写地址",trigger:"blur"}]},single:!1}},methods:{toLogin:function(){window.location.hash="/login"},handleSignIn:function(e){var t=this,i=this.formInline.user,a=this.formInline.password1,s=this.formInline.password2;this.$refs[e].validate(function(e){if(e&&a===s){var c={username:i,password:a},r=t.myconfig.baseurl+"/register",l=function(e){var n=JSON.parse(e);"success"===n.register?(console.log("注册成功"),t.$router.push({path:"/home"}),window.localStorage.discountToken=n.token,sessionStorage.discount_userid=n.userid,sessionStorage.discount_username=n.username):"fail"===n.register?console.log("注册失败"):console.log("someting wrong")};n.i(o.a)(c,r,"post",l)}else console.log("两次密码输入不一致")})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"uploadimg",props:["index","FL"],computed:{uploadimg_id:function(){var e="";return e=e+"uploadimg-"+this.index.toString()}},created:function(){this.files=this.FL},data:function(){return{files:[]}},methods:{remove:function(){this.$emit("removeComponent",this.index)},filechanged:function(e){var t=this,n=e.target.files;[].map.call(n,function(e,o){var i=new FileReader;/image/.test(e.type)?(i.readAsDataURL(e),i.onerror=function(){console.log("上传失败，错误码为:"+i.error.code)},i.onload=function(a){t.files.push({fileinfo:e,value:i.result,progress:0}),o+1==n.length&&t.$emit("getinputimg",{index:t.index,files:t.files})}):alert("请选择图片文件！")})},uploadimg:function(){var e=this;this.files.map(function(e){return e.fileinfo}).forEach(function(t,n){var o,i;o=new FormData,o.append("file",t),i=new XMLHttpRequest,i.upload.onprogress=function(t){if(t.lengthComputable){var o=Math.round(100*t.loaded/t.total);e.files[n].progress=o}},i.open("post",e.myconfig.baseurl+"/postimg",!0),i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<300||304===i.status){var t=JSON.parse(i.responseText);console.log(t),e.files[n]=t.url,console.log(n)}else alert("ajax通信失败 "+i.status)},i.send(o)})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={methods:{handleSuccess:function(e,t){console.log(t)},handleFormatError:function(e){console.log(e)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(15),i=n(47),a=n.n(i),s=n(43),c=n(45),r=n.n(c),l=n(44),d=(n.n(l),n(46)),m=n.n(d),p=n(42);o.default.use(p.a),o.default.use(m.a),o.default.use(r.a),o.default.config.productionTip=!1,m.a.initAMapApiLoader({key:"1b8112ff01a85d4dcde9887e064562d6",plugin:["AMap.Driving","AMap.Walking","AMap.Transfer","AMap.Geolocation","AMap.Autocomplete","AMap.PlaceSearch","AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.PolyEditor","AMap.CircleEditor"]}),new o.default({el:"#app",router:s.a,template:"<App/>",components:{App:a.a}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){n(98);var o=n(0)(n(49),n(118),"data-v-07156ba4",null);e.exports=o.exports},function(e,t,n){n(106);var o=n(0)(n(51),n(125),"data-v-54971fb6",null);e.exports=o.exports},function(e,t,n){n(104),n(103);var o=n(0)(n(52),n(123),"data-v-468d6605",null);e.exports=o.exports},function(e,t,n){n(105);var o=n(0)(n(53),n(124),"data-v-512f46e5",null);e.exports=o.exports},function(e,t,n){n(100);var o=n(0)(n(59),n(120),"data-v-0ba90ffd",null);e.exports=o.exports},function(e,t,n){var o=n(0)(n(61),n(127),null,null);e.exports=o.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("transition",{attrs:{name:"loading-done"}},[e.loading?n("div",{key:"1"},[n("div",{staticClass:"loading"},[n("div",{staticClass:"loading-icon"},[n("Icon",{attrs:{type:"load-c",size:"50",color:"#2d8cf0"}})],1),e._v(" "),n("div",{staticClass:"loading-text"},[e._v("loading")])])]):n("div",{key:"2"},[n("div",{staticClass:"container"},[n("div",{staticClass:"header"},[n("span",{attrs:{calss:"city"},on:{click:e.cityPicker}},[e._v(e._s(e.userinfo.location||e.currentCity)+" "),n("Icon",{attrs:{type:"chevron-down"}})],1),e._v(" "),n("Button",{staticClass:"search-btn",staticStyle:{"background-color":"white"},attrs:{type:"ghost",shape:"circle",icon:"ios-search"}},[e._v("搜索")]),e._v(" "),n("Icon",{attrs:{size:"20",type:"ios-bell"}})],1),e._v(" "),e._l(e.activities,function(t,o){return n("div",{staticClass:"block",on:{click:function(n){e.toActivityPage(t._id)}}},[n("div",{staticClass:"userInfo-container"},[n("div",{staticClass:"userInfo"},[n("div",{staticClass:"head-img-container"},[n("img",{staticClass:"header-img",attrs:{src:-1==t.shopheadimg.indexOf("http")?e.myconfig.baseurl+t.shopheadimg:t.shopheadimg}})]),e._v(" "),n("div",{staticClass:"head-uerInfo",on:{click:function(n){n.stopPropagation(),e.toShopPage(t.shopid)}}},[n("p",[e._v(e._s(t.shopname))]),e._v(" "),n("p",[e._v(e._s(t.posttime))])])]),e._v(" "),(e.userinfo.username?t.isFansTmp:0)?n("Button",{staticStyle:{float:"right",color:"#ff9900","border-color":"#ff9900"},attrs:{type:"ghost",size:"small",icon:"checkmark"},on:{click:function(t){t.stopPropagation(),e.changeShopInfo(e.userinfo._id,o)}}},[e._v("已关注")]):n("Button",{staticStyle:{float:"right"},attrs:{type:"ghost",size:"small",icon:"plus"},on:{click:function(t){t.stopPropagation(),e.changeShopInfo(e.userinfo._id,o)}}},[e._v("加关注")])],1),e._v(" "),n("div",{staticClass:"cover"},[n("div",{staticClass:"cover-img-container"},[n("img",{staticClass:"cover-img",attrs:{src:e.myconfig.baseurl+t.activitycontent[2].coverimg}})]),e._v(" "),n("div",{staticClass:"activity-Info"},[n("p",[e._v(e._s(t.activitycontent[0].title))]),e._v(" "),n("p",[e._v(e._s(t.activitycontent[1].content))])])]),e._v(" "),n("div",{staticClass:"control"},[n("span",{staticClass:"eye"},[n("Icon",{attrs:{size:"16",type:"eye"}}),e._v(e._s(t.statics.watches))],1),e._v(" "),n("div",[t.isCollectedTmp?n("Button",{staticClass:"collection",staticStyle:{color:"orange","border-color":"orange"},attrs:{type:"ghost",shape:"circle",icon:"android-favorite"},on:{click:function(t){t.stopPropagation(),e.setStaticsInfo(o,"collections",!1)}}},[e._v(e._s(t.statics.collections))]):n("Button",{staticClass:"collection",attrs:{type:"ghost",shape:"circle",icon:"android-favorite-outline"},on:{click:function(t){t.stopPropagation(),e.setStaticsInfo(o,"collections",!0)}}},[e._v(e._s(t.statics.collections))]),e._v(" "),t.isLikeTmp?n("Button",{staticClass:"like",staticStyle:{color:"orange","border-color":"orange"},attrs:{type:"ghost",shape:"circle",icon:"thumbsup"},on:{click:function(t){t.stopPropagation(),e.setStaticsInfo(o,"likes",!1)}}},[e._v(e._s(t.statics.likes))]):n("Button",{staticClass:"like",attrs:{type:"ghost",shape:"circle",icon:"thumbsup"},on:{click:function(t){t.stopPropagation(),e.setStaticsInfo(o,"likes",!0)}}},[e._v(e._s(t.statics.likes))]),e._v(" "),n("Button",{staticClass:"comment",attrs:{type:"ghost",shape:"circle",icon:"chatbox-working"}},[e._v(e._s(t.statics.comments.length))])],1)])])})],2)])]),e._v(" "),n("footer-Component")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showMap?n("div",[n("map-Component",{attrs:{addressInfo:e.shopInfo.location},on:{hide:function(t){e.showMap=!1}}})],1):n("div",{staticClass:"shop-container"},[n("transition",{attrs:{name:"loading-done"}},[e.loading?n("div",{key:"1"},[n("div",{staticClass:"loading"},[n("div",{staticClass:"loading-icon"},[n("Icon",{attrs:{type:"load-c",size:"50",color:"#2d8cf0"}})],1),e._v(" "),n("div",{staticClass:"loading-text"},[e._v("loading")])]),e._v(" "),n("footer-Component")],1):n("div",{key:"2"},[n("div",{staticClass:"shop-back"},[n("span",{on:{click:e.back}},[n("Button",{attrs:{type:"text",icon:"chevron-left",size:"large"}},[e._v("返回")])],1),e._v(" "),n("span",[e._v("店铺页面")]),e._v(" "),e.shopInfo.masterid.length>0&&e.shopInfo.masterid===e.userId?n("span",{on:{click:e.toPostPage}},[n("Button",{attrs:{type:"text",icon:"ios-compose",size:"large"}},[e._v("发布")])],1):n("span",{staticStyle:{visibility:"hidden"}},[e._v("占位符")])]),e._v(" "),n("div",{staticClass:"shop-header",style:{backgroundImage:"url("+(-1===e.shopInfo.coverimg.indexOf("http")?e.myconfig.baseurl+e.shopInfo.coverimg:e.shopInfo.coverimg)+")"}},[n("div",{staticClass:"leftpart"},[n("img",{staticClass:"head-Img",attrs:{src:-1===e.shopInfo.headimg.indexOf("http")?e.myconfig.baseurl+e.shopInfo.headimg:e.shopInfo.headimg}}),e._v(" "),n("span",{staticClass:"shopname"},[e._v(e._s(e.shopInfo.shopname))])]),e._v(" "),n("div",{staticClass:"rightpart"},[n("div",[n("div",{staticStyle:{"text-align":"center",color:"orange"}},[n("p",[e._v(e._s(e.shopInfo.fans))]),e._v(" "),n("p",[e._v("粉丝数")])]),e._v(" "),e.isFansTmp?n("Button",{staticStyle:{color:"#ff9900","border-color":"#ff9900"},attrs:{type:"ghost",size:"small",icon:"checkmark"},on:{click:function(t){e.changeShopInfo(e.userId)}}},[e._v("已关注")]):n("Button",{attrs:{type:"info",size:"small",icon:"plus"},on:{click:function(t){e.changeShopInfo(e.userId)}}},[e._v("加关注")])],1)])]),e._v(" "),n("div",{staticClass:"location",on:{click:function(t){e.showMap=!0}}},[n("Icon",{attrs:{type:"location",size:"20"}}),e._v(" "+e._s(e.shopInfo.location)+"\n    ")],1),e._v(" "),n("div",{staticClass:"activity-header"},[e._v("活动")]),e._v(" "),e._l(e.activities,function(t,o){return n("div",[n("Collects",{attrs:{baseurl:e.myconfig.baseurl,activityInfo:t,activities:e.activities},on:{toActivitiyPage:function(n){e.toActivitiyPage(t._id)}}})],1)})],2)])],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"login-header"},[n("router-link",{attrs:{to:"/home"}},[n("Icon",{attrs:{type:"chevron-left"}}),e._v("\n        去首页\n    ")],1),e._v(" "),n("span",{staticClass:"set",on:{click:function(t){e.show=!0}}},[e._v("账户注册")]),e._v(" "),n("span",{staticStyle:{visibility:"hidden"}},[e._v("占位符")])],1),e._v(" "),n("div",{staticClass:"login-content"},[n("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline}},[n("Form-item",{attrs:{prop:"user"}},[n("Input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.formInline.user,callback:function(t){e.formInline.user=t},expression:"formInline.user"}},[n("Icon",{attrs:{type:"ios-person-outline"},slot:"prepend"})],1)],1),e._v(" "),n("Form-item",{attrs:{prop:"password1"}},[n("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.formInline.password1,callback:function(t){e.formInline.password1=t},expression:"formInline.password1"}},[n("Icon",{attrs:{type:"ios-locked-outline"},slot:"prepend"})],1)],1),e._v(" "),n("Form-item",{attrs:{prop:"password2"}},[n("Input",{attrs:{type:"password",placeholder:"再次输入密码"},model:{value:e.formInline.password2,callback:function(t){e.formInline.password2=t},expression:"formInline.password2"}},[n("Icon",{attrs:{type:"ios-locked-outline"},slot:"prepend"})],1)],1),e._v(" "),n("Form-item",[n("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSignIn("formInline")}}},[e._v("注册")])],1)],1),e._v(" "),n("a",{on:{click:e.toLogin}},[e._v("已有账户？点我登录")])],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"login-header"},[n("router-link",{attrs:{to:"/home"}},[n("Icon",{attrs:{type:"chevron-left"}}),e._v("\n        去首页\n    ")],1),e._v(" "),n("span",{staticClass:"set",on:{click:function(t){e.show=!0}}},[e._v("账户登录")]),e._v(" "),n("span",{staticStyle:{visibility:"hidden"}},[e._v("占位符")])],1),e._v(" "),n("div",{staticClass:"login-content"},[n("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline}},[n("Form-item",{attrs:{prop:"user"}},[n("Input",{attrs:{type:"text",placeholder:"Username"},model:{value:e.formInline.user,callback:function(t){e.formInline.user=t},expression:"formInline.user"}},[n("Icon",{attrs:{type:"ios-person-outline"},slot:"prepend"})],1)],1),e._v(" "),n("Form-item",{attrs:{prop:"password"}},[n("Input",{attrs:{type:"password",placeholder:"Password"},model:{value:e.formInline.password,callback:function(t){e.formInline.password=t},expression:"formInline.password"}},[n("Icon",{attrs:{type:"ios-locked-outline"},slot:"prepend"})],1)],1),e._v(" "),n("Form-item",[n("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleLogIn("formInline")}}},[e._v("登录")])],1)],1),e._v(" "),n("a",{on:{click:e.toSignUp}},[e._v("还没有账户？点我注册")])],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"citypicker-header"},[n("span",{on:{click:function(t){t.stopPropagation(),e.back(t)}}},[n("Icon",{attrs:{type:"chevron-left",size:"20"}})],1)]),e._v(" "),n("div",{staticClass:"citypicker-body",on:{click:function(t){t.stopPropagation(),e.getCity(t)}}},[n("div",{staticClass:"citypicker-body-up"},[n("div",{staticClass:"current-location"},[e._v("当前城市："+e._s(e.currentCity))]),e._v(" "),n("div",{staticClass:"citypicker-block-container"},[n("span",[e._v("当前定位的城市")]),e._v(" "),n("div",{staticClass:"citypicker-block",attrs:{"data-identification":"city"}},[e._v(e._s(e.currentLocation))])]),e._v(" "),n("div",{staticClass:"citypicker-block-container"},[n("span",[e._v("热门城市")]),e._v(" "),n("div",{staticClass:"citypicker-block-s"},e._l(e.hotCity,function(t){return n("div",{staticClass:"citypicker-block",attrs:{"data-identification":"city"}},[e._v(e._s(t))])}))])]),e._v(" "),n("div",{staticClass:"citypicker-body-down"},[n("Collapse",{model:{value:e.province_value,callback:function(t){e.province_value=t},expression:"province_value"}},e._l(e.province_list,function(t,o){return n("Panel",{attrs:{name:t.name}},[e._v("\n          "+e._s(t.name)+"\n          "),n("div",{staticClass:"city-content",slot:"content"},e._l(t.city_list,function(t){return n("div",{staticClass:"alpha-city-block",attrs:{"data-identification":"city"}},[e._v(e._s(t.name))])}))])}))],1)])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.loading?e._e():n("div",[n("transition",{attrs:{name:"setPart"}},[e.setShow?n("div",{staticClass:"setPart"},[n("div",{staticClass:"set-header"},[n("Button",{attrs:{type:"text",icon:"chevron-left"},on:{click:function(t){e.setShow=!1}}},[e._v("返回")])],1),e._v(" "),n("input",{staticStyle:{display:"none"},attrs:{id:"user_headimg",type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png"},on:{change:e.filechanged}}),e._v(" "),n("input",{staticStyle:{display:"none"},attrs:{id:"user_coverimg",type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png"},on:{change:e.filechanged}}),e._v(" "),n("input",{staticStyle:{display:"none"},attrs:{id:"shop_headimg",type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png"},on:{change:e.filechanged}}),e._v(" "),n("input",{staticStyle:{display:"none"},attrs:{id:"shop_coverimg",type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png"},on:{change:e.filechanged}}),e._v(" "),n("Collapse",{staticStyle:{"border-left":"none","border-right":"none"}},[n("Panel",{attrs:{name:"1"}},[e._v("\r\n          个人资料\r\n          "),n("ul",{slot:"content"},[n("li",[n("span",[e._v("头像")]),e._v(" "),n("div",{staticStyle:{position:"relative"}},[n("img",{staticClass:"head-Img",attrs:{src:e.personalinfo.headimg}}),e._v(" "),n("transition",{attrs:{name:"img-cover"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.uploadimg.user_headimg.loading,expression:"uploadimg.user_headimg.loading"}],staticClass:"img-cover"})]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.uploadimg.user_headimg.loading,expression:"uploadimg.user_headimg.loading"}],staticClass:"img-progress",style:{width:e.uploadimg.user_headimg.progress+"%"}})],1),e._v(" "),n("label",{attrs:{for:"user_headimg"}},[n("Icon",{attrs:{size:"20",type:"camera"}})],1)]),e._v(" "),n("li",[n("span",[e._v("背景")]),e._v(" "),n("div",{staticStyle:{position:"relative"}},[n("img",{staticClass:"head-Img",attrs:{src:e.personalinfo.coverimg}}),e._v(" "),n("transition",{attrs:{name:"img-cover"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.uploadimg.user_coverimg.loading,expression:"uploadimg.user_coverimg.loading"}],staticClass:"img-cover"})]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.uploadimg.user_coverimg.loading,expression:"uploadimg.user_coverimg.loading"}],staticClass:"img-progress",style:{width:e.uploadimg.user_coverimg.progress+"%"}})],1),e._v(" "),n("label",{attrs:{for:"user_coverimg"}},[n("Icon",{attrs:{size:"20",type:"camera"}})],1)]),e._v(" "),n("li",[n("span",[e._v("性别")]),e._v(" "),n("Select",{staticStyle:{width:"180px"},model:{value:e.personalinfo.sex,callback:function(t){e.personalinfo.sex=t},expression:"personalinfo.sex"}},[n("Option",{key:"1",attrs:{value:"male"}},[e._v("男")]),n("Option",{key:"2",attrs:{value:"female"}},[e._v("女")])],1)],1),e._v(" "),n("li",[n("span",[e._v("生辰")]),e._v(" "),n("Date-picker",{staticStyle:{width:"180px"},attrs:{type:"date"},model:{value:e.personalinfo.birthday,callback:function(t){e.personalinfo.birthday=t},expression:"personalinfo.birthday"}})],1),e._v(" "),n("li",[n("span",[e._v("常驻")]),e._v(" "),n("Select",{staticStyle:{width:"180px"},attrs:{value:e.personal.userInfo.location,placeholder:e.personal.userInfo.location}},[n("Option",{key:"1",attrs:{value:"北京"}},[e._v("北京")]),e._v(" "),n("Option",{key:"2",attrs:{value:"深圳"}},[e._v("深圳")]),e._v(" "),n("Option",{key:"3",attrs:{value:"西安"}},[e._v("西安")])],1)],1)])]),e._v(" "),n("Panel",{attrs:{name:"2"}},[e._v("我的店铺\r\n          "),e.personal.userInfo.myshop.hasshop?n("ul",{slot:"content"},[n("li",[n("span",[e._v("店铺头像")]),e._v(" "),n("div",{staticStyle:{position:"relative"}},[n("img",{staticClass:"head-Img",attrs:{src:-1===e.personal.userInfo.myshopInfo.headimg.indexOf("http")?e.myconfig.baseurl+e.personal.userInfo.myshopInfo.headimg:e.personal.userInfo.myshopInfo.headimg}}),e._v(" "),n("transition",{attrs:{name:"img-cover"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.uploadimg.shop_headimg.loading,expression:"uploadimg.shop_headimg.loading"}],staticClass:"img-cover"})]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.uploadimg.shop_headimg.loading,expression:"uploadimg.shop_headimg.loading"}],staticClass:"img-progress",style:{width:e.uploadimg.shop_headimg.progress+"%"}})],1),e._v(" "),n("label",{attrs:{for:"shop_headimg"}},[n("Icon",{attrs:{size:"20",type:"camera"}})],1)]),e._v(" "),n("li",[n("span",[e._v("店铺背景")]),e._v(" "),n("div",{staticStyle:{position:"relative"}},[n("img",{staticClass:"head-Img",attrs:{src:-1===e.personal.userInfo.myshopInfo.coverimg.indexOf("http")?e.myconfig.baseurl+e.personal.userInfo.myshopInfo.coverimg:e.personal.userInfo.myshopInfo.coverimg}}),e._v(" "),n("transition",{attrs:{name:"img-cover"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.uploadimg.shop_coverimg.loading,expression:"uploadimg.shop_coverimg.loading"}],staticClass:"img-cover"})]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.uploadimg.shop_coverimg.loading,expression:"uploadimg.shop_coverimg.loading"}],staticClass:"img-progress",style:{width:e.uploadimg.shop_coverimg.progress+"%"}})],1),e._v(" "),n("label",{attrs:{for:"shop_coverimg"}},[n("Icon",{attrs:{size:"20",type:"camera"}})],1)]),e._v(" "),n("li",[n("span",[e._v("店铺名称")]),n("p",[e._v(e._s(e.personal.userInfo.myshopInfo.shopname))])]),e._v(" "),n("li",{on:{click:function(t){e.toShopPage(e.personal.userInfo.myshop.shopid)}}},[n("span",[e._v("去店铺首页")]),n("Icon",{attrs:{type:"chevron-right"}})],1)]):n("ul",{slot:"content"},[n("li",{staticClass:"openShop-btn",on:{click:function(t){t.stopPropagation(),e.openshop(t)}}},[e._v("申请开店")])])])],1),e._v(" "),n("div",{staticClass:"log-out"},[n("Button",{attrs:{long:"",type:"warning"},on:{click:e.logOut}},[e._v("退出当前登录")])],1)],1):e._e()])],1),e._v(" "),n("transition",{attrs:{name:"loading-done"}},[e.loading?n("div",{key:"1"},[n("div",{staticClass:"loading"},[n("div",{staticClass:"loading-icon"},[n("Icon",{attrs:{type:"load-c",size:"50",color:"#2d8cf0"}})],1),e._v(" "),n("div",{staticClass:"loading-text"},[e._v("loading")])])]):n("div",[n("div",{key:"2"},[n("div",{staticClass:"setandsistem"},[n("span",{staticClass:"set",on:{click:function(t){e.setShow=!0}}},[n("Icon",{attrs:{type:"gear-b"}}),e._v("设置")],1),e._v(" "),n("Icon",{staticClass:"bell",attrs:{size:"20",type:"ios-bell"}})],1),e._v(" "),n("div",{staticClass:"header",style:{backgroundImage:"url("+e.personalinfo.coverimg+")"}},[n("span",{staticClass:"username"},[e._v(e._s(e.personal.userInfo.username))]),e._v(" "),n("img",{staticClass:"head-Img",attrs:{src:e.personalinfo.headimg}})]),e._v(" "),n("div",{staticClass:"user-info"},[n("Menu",{staticStyle:{display:"flex","justify-content":"space-around"},attrs:{mode:"horizontal","active-name":e.sellected}},[n("Menu-item",{attrs:{name:"1"}},[n("div",{on:{click:function(t){e.sellected=1}}},[n("Icon",{attrs:{type:"eye"}}),e._v("\r\n              我的关注\r\n            ")],1)]),e._v(" "),n("div",{staticStyle:{width:"1px",height:"100%","border-left":"1px solid rgb(200, 224, 228)"}}),e._v(" "),n("Menu-item",{attrs:{name:"2"}},[n("div",{on:{click:function(t){e.sellected=2}}},[n("Icon",{attrs:{type:"android-checkmark-circle"}}),e._v("\r\n              我的收藏\r\n            ")],1)])],1)],1),e._v(" "),1===e.sellected?n("div",{staticClass:"app-content"},e._l(e.personal.shopsInfo,function(t,o){return n("div",{staticClass:"block",on:{click:function(n){e.toShopPage(t.shopId)}}},[n("Follows",{attrs:{shopInfo:t,baseurl:e.myconfig.baseurl},on:{remove:function(t){e.removeShop(o)}}})],1)})):n("div",{staticClass:"app-content"},e._l(e.personal.activitiesInfo,function(t,o){return n("div",{staticClass:"block",on:{click:function(n){e.toActivityPage(t.activityId)}}},[n("Collects",{attrs:{activityInfo:t,baseurl:e.myconfig.baseurl},on:{remove:function(t){e.removeActivity(o)},toShop:function(n){e.toShopPage(t.shopId)}}})],1)}))])])]),e._v(" "),n("footer-Component")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"post-back"},[n("span",{on:{click:e.back}},[n("Button",{attrs:{type:"text",icon:"chevron-left",size:"small"}},[e._v("返回")])],1),e._v(" "),n("span",[e._v(e._s(e.postnote))]),e._v(" "),n("span",{staticStyle:{visibility:"hidden"}},[e._v("占位符")])]),e._v(" "),n("div",{staticClass:"add-content",on:{click:e.addContent}},[n("Button",{staticClass:"post_btn",staticStyle:{color:"white"},attrs:{"data-index":"1",type:"dashed"}},[e._v("小标题")]),e._v(" "),n("Button",{staticClass:"post_btn",staticStyle:{color:"white"},attrs:{"data-index":"2",type:"dashed"}},[e._v("文本")]),e._v(" "),n("Button",{staticClass:"post_btn",staticStyle:{color:"white"},attrs:{"data-index":"3",type:"dashed"}},[n("Icon",{attrs:{type:"ios-camera-outline",size:"24"}})],1),e._v(" "),n("Button",{staticClass:"post_btn",staticStyle:{color:"white"},attrs:{"data-index":"5",type:"dashed"},on:{click:e.post}},[e._v("提交")])],1),e._v(" "),n("div",{attrs:{id:"text-content"}},[n("div",{staticClass:"contentContainer"},[n("label",{staticClass:"note"},[e._v("活动标题 "),n("span",{staticClass:"warn"},[e._v(e._s(e.title_note))])]),e._v(" "),n("Input",{staticClass:"add_input",attrs:{placeholder:"请输入活动标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),n("div",{staticClass:"contentContainer"},[n("label",{staticClass:"note"},[e._v("活动摘要"),n("span",{staticClass:"warn"},[e._v(e._s(e.summary_note))])]),e._v(" "),n("Input",{staticClass:"add_input",attrs:{placeholder:"请输入活动摘要"},model:{value:e.summary,callback:function(t){e.summary=t},expression:"summary"}})],1),e._v(" "),n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("addcoverimg",{attrs:{FL:e.coverimg},on:{getinputimg:e.getcoverimg}}),e._v(" "),n("span",{staticClass:"warn"},[e._v(e._s(e.coverimg_note))])],1),e._v(" "),e._l(e.mycomponents,function(t,o){return n("div",["addtitle"===t?n("addtitle",{attrs:{text:e.inputdata[o],index:o},on:{getinputvalue:e.gettitle,removeComponent:e.removeComponent}}):"addtext"===t?n("addtext",{attrs:{text:e.inputdata[o],index:o},on:{getinputvalue:e.getcontent,removeComponent:e.removeComponent}}):n("addimg",{attrs:{FL:e.inputdata[o],index:o},on:{getinputimg:e.getimg,removeComponent:e.removeComponent}})],1)})],2),e._v(" "),n("footer-Component")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"login-header"},[n("router-link",{attrs:{to:"/home"}},[n("Icon",{attrs:{type:"chevron-left"}}),e._v("\n        去首页\n    ")],1),e._v(" "),n("span",{staticClass:"set",on:{click:function(t){e.show=!0}}},[e._v("店铺申请")]),e._v(" "),n("span",{staticStyle:{visibility:"hidden"}},[e._v("占位符")])],1),e._v(" "),n("div",{staticClass:"login-content"},[n("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline}},[n("Form-item",{attrs:{prop:"user"}},[n("Input",{attrs:{type:"text",placeholder:"请输入店铺名称"},model:{value:e.formInline.user,callback:function(t){e.formInline.user=t},expression:"formInline.user"}},[n("Icon",{attrs:{type:"ios-person-outline"},slot:"prepend"})],1)],1),e._v(" "),n("Form-item",{attrs:{prop:"location"}},[n("Input",{attrs:{placeholder:"详细地址"},model:{value:e.formInline.location,callback:function(t){e.formInline.location=t},expression:"formInline.location"}},[n("Icon",{attrs:{type:"location"},slot:"prepend"})],1)],1),e._v(" "),n("Form-item",[n("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSignIn("formInline")}}},[e._v("开店")])],1)],1)],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Upload",{attrs:{"on-success":e.handleSuccess,"on-format-error":e.handleFormatError,multiple:"",action:"//jsonplaceholder.typicode.com/posts/"}},[n("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[e._v("上传文件")])],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footer"},[n("Menu",{staticStyle:{"background-color":"#e3e8ee",display:"flex","justify-content":"space-around"},attrs:{mode:"horizontal","active-name":e.active}},[n("router-link",{attrs:{to:"/home"}},[n("Menu-item",{attrs:{name:"1"}},[n("Icon",{attrs:{type:"home"}}),e._v("\n        首页\n      ")],1)],1),e._v(" "),n("div",{staticClass:"divider"}),e._v(" "),n("router-link",{attrs:{to:e.personal}},[n("Menu-item",{attrs:{name:"3"}},[n("Icon",{attrs:{type:"person"}}),e._v("\n          我的\n      ")],1)],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("transition",{attrs:{name:"loading-done"}},[e.loading?n("div",{key:"1"},[n("div",[n("div",{staticClass:"loading"},[n("div",{staticClass:"loading-icon"},[n("Icon",{attrs:{type:"load-c",size:"50",color:"#2d8cf0"}})],1),e._v(" "),n("div",{staticClass:"loading-text"},[e._v("loading")])]),e._v(" "),n("footer-Component")],1)]):n("div",{key:"2"},[n("div",[n("div",{staticClass:"activity-header"},[n("span",{on:{click:e.back}},[n("Icon",{attrs:{type:"arrow-left-c",size:"20"}})],1),e._v(" "),n("span",{staticClass:"shopName"},[e._v(e._s(e.activityInfo.shopname))])]),e._v(" "),n("div",{staticClass:"acti-body"},e._l(e.activityInfo.activitycontent,function(t,o){return n("div",[t.title&&0==o?n("h3",[e._v(e._s(t.title)),n("span",{staticClass:"post-time"},[e._v(e._s(e.activityInfo.posttime))])]):e._e(),e._v(" "),t.title&&o>0?n("h4",[e._v(e._s(t.title))]):e._e(),e._v(" "),t.content?n("p",[e._v(e._s(t.content))]):e._e(),e._v(" "),e._l(t,function(o){return t instanceof Array?n("div",{staticClass:"img-container"},[n("img",{staticClass:"img",attrs:{src:e.myconfig.baseurl+o}})]):e._e()})],2)})),e._v(" "),n("div",{staticClass:"comments-header"},[e._v("全部评论")]),e._v(" "),Object.keys(e.activityInfo).length>0?n("div",{staticClass:"comments"},e._l(e.activityInfo.statics.comments,function(t,o){return n("div",{staticClass:"comments-line",on:{click:function(n){e.answear(t)}}},[n("span",{staticClass:"person"},[e._v(e._s(t.speaker))]),e._v(" "),t.accept.length>0?n("span",[e._v("回复")]):e._e(),e._v(" "),t.accept.length>0?n("span",{staticClass:"person"},[e._v(e._s(t.accept))]):e._e(),e._v(" "),n("span",[e._v("："+e._s(t.content))])])})):e._e(),e._v(" "),n("div",{staticClass:"activity-footer"},[n("div",[n("Input",{attrs:{placeholder:e.placeholder},model:{value:e.commentContent,callback:function(t){e.commentContent=t},expression:"commentContent"}},[n("span",{on:{click:e.enterComment},slot:"append"},[n("Tooltip",{attrs:{placement:"top",content:"输入不能为空",disabled:e.showNote}},[n("Icon",{attrs:{type:"chatbubble-working"}})],1)],1)])],1),e._v(" "),Object.keys(e.activityInfo).length>0?n("div",{staticClass:"div2"},[n("span",[n("Icon",{attrs:{type:"eye"}}),e._v(e._s(e.activityInfo.statics.watches))],1),e._v(" "),n("span",{class:e.isLikeTmp?e.staticactive:"",on:{click:function(t){e.changeActivityInfo(e.userId,"likes")}}},[n("Icon",{attrs:{type:"thumbsup"}}),e._v(e._s(e.activityInfo.statics.likes))],1),e._v(" "),n("span",{class:e.isCollectedTmp?e.staticactive:"",on:{click:function(t){e.changeActivityInfo(e.userId,"collections")}}},[n("Icon",{attrs:{type:"android-favorite"}}),e._v(e._s(e.activityInfo.statics.collections))],1),e._v(" "),n("span",[n("Icon",{attrs:{type:"chatbubble-working"}}),e._v(e._s(e.activityInfo.statics.comments.length))],1)]):e._e()])])])])],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-amap-search-box",{staticClass:"search-box",staticStyle:{display:"none"},attrs:{"search-option":e.searchOption,"on-search-result":e.onSearchResult,events:e.search}}),e._v(" "),n("div",{staticClass:"amap-wrapper",style:e.screenheight},[n("el-amap",{attrs:{plugin:e.plugin,center:e.mapCenter,amapManager:"AmapManager"}},[e._l(e.markers,function(t,o){return n("div",[n("el-amap-marker",{attrs:{animation:"AMAP_ANIMATION_DROP",position:t.location,title:t.name,icon:t.icon,events:e.toThisPlace}})],1)}),e._v(" "),n("el-amap-polyline",{attrs:{path:e.plan,strokeColor:"red"}})],2)],1),e._v(" "),n("div",{staticClass:"Geolocation",on:{click:e.Geolocation}},[n("Button",{attrs:{type:"info",shape:"circle",icon:"ios-navigate"}})],1),e._v(" "),n("div",{staticClass:"toolbar"},[n("span",{on:{click:e.hide}},[n("Icon",{attrs:{type:"close",size:"20"}})],1),e._v(" "),n("Select",{staticStyle:{width:"100px"},attrs:{disabled:e.transSelectedDisabled},on:{"on-change":e.changeTrans},model:{value:e.transSelected,callback:function(t){e.transSelected=t},expression:"transSelected"}},e._l(e.transList,function(t){return n("Option",{key:t,attrs:{value:t.value}},[e._v(e._s(t.label))])})),e._v(" "),n("Select",{staticStyle:{width:"100px"},attrs:{disabled:e.planSelectedDisabled},on:{"on-change":e.changePlan},model:{value:e.planSelected,callback:function(t){e.planSelected=t},expression:"planSelected"}},e._l(e.plansList,function(t){return n("Option",{key:t,attrs:{value:t.value}},[e._v(e._s(t.label))])})),e._v(" "),n("div",{on:{click:function(t){e.showPanel=!e.showPanel}}},[n("Icon",{attrs:{type:"ios-paw",size:"25",color:"orange"}})],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPanel,expression:"showPanel"}],attrs:{id:"panel"},on:{click:e.clickPanel}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contentContainer"},[n("input",{staticStyle:{display:"none"},attrs:{id:e.uploadimg_id,type:"file",multiple:"",accept:"image/gif,image/jpeg,image/jpg,image/png"},on:{change:e.filechanged}}),e._v(" "),n("div",{staticClass:"contentContainer_inner"},[n("label",{staticStyle:{display:"block",width:"8rem",height:"3rem","line-height":"3rem","text-align":"center","border-radius":"3px",border:"1px solid #dddee1"},attrs:{for:e.uploadimg_id}},[n("Icon",{attrs:{size:"20",type:"ios-cloud-upload-outline"}}),e._v("上传图片")],1),e._v(" "),n("Button",{attrs:{type:"text",icon:"close-circled"},on:{click:e.remove}})],1),e._v(" "),n("div",{staticClass:"filelist"},e._l(e.files,function(t,o){return n("div",{staticClass:"show-file"},[n("div",{staticClass:"show-file-image"},[n("img",{attrs:{src:t.value,width:"100px",height:"100px"}})]),e._v(" "),n("div",{staticClass:"show-file-progress"},[e._v(e._s(t.progress))])])}))])},staticRenderFns:[]}}],[62]);
//# sourceMappingURL=app.42d96d0c1a4ab7869b7e.js.map